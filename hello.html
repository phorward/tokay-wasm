<!doctype html>
<html>
    <body>
        <form id="program">
            <div>
                <textarea id="code" placeholder="Tokay" required>Int * 3</textarea>
            </div>

            <div>
                <textarea id="input" placeholder="Input (optional)">123 456 789</textarea>
            </div>

            <div id="output"></div>

            <div>
                <input type="submit" value="Run" />
            </div>
        </form>

        <script type="module">
            import init, { tokay } from "./pkg/tokay_wasm.js";

            await init();

            document
                .getElementById("program")
                .addEventListener("submit", (e) => {
                    e.stopPropagation();
                    e.preventDefault();

                    document.getElementById("output").appendChild(
                        document.createTextNode(
                            tokay(
                                document.getElementById("code").value,
                                document.getElementById("input").value,
                            ),
                        ),
                    );
                });
        </script>
    </body>
</html>
